services:
  autoglm-gui:
    # 使用 GHCR 预构建镜像
    image: ghcr.io/suyiiyii/autoglm-gui:main
    container_name: autoglm-gui

    # Linux: use host network for mDNS/USB support (推荐)
    # macOS/Windows: use port mapping instead (comment out network_mode, uncomment ports)
    network_mode: host

    # Alternative: bridge network with port mapping
    # ports:
    #   - "8000:8000"

    # 环境变量可选，也可以在 Web 界面中配置
    # environment:
    #   - AUTOGLM_BASE_URL=https://open.bigmodel.cn/api/paas/v4
    #   - AUTOGLM_MODEL_NAME=autoglm-phone
    #   - AUTOGLM_API_KEY=sk-your-api-key

    volumes:
      - autoglm_config:/root/.config/autoglm
      - autoglm_logs:/app/logs
      # USB device passthrough (Linux only, optional)
      # - /dev/bus/usb:/dev/bus/usb

    restart: unless-stopped

volumes:
  autoglm_config:
  autoglm_logs:
